Input (stdin)
3 1000
2 5 4
3 7 8 9
5 5 7 8 9 10

Expected Output
206

Explanation

Picking 5 from the 1st list, 9 from the 2nd list and 10 from the 3rd list gives the maximum  value equal to (5**2 +9**2+ 10**2)% 1000 = 206.